<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>oneAI — Directive Grid</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="shell">
      <header class="topbar">
        <div>
          <p class="kicker">oneAI Strategy Lab</p>
          <h1>Directive Grid</h1>
          <p class="subtitle">You’re the stability director. Each directive is a containment choice that protects the grid.</p>
        </div>
        <div class="controls">
          <button id="btnStart" class="primary">Start</button>
          <button id="btnPause">Pause</button>
          <button id="btnReset">Reset</button>
        </div>
      </header>

      <section class="hud" aria-live="polite">
        <div class="pill" id="statPhase">Phase: Briefing</div>
        <div class="pill" id="statScore">Score: 0</div>
        <div class="pill" id="statIntegrity">Integrity: 5</div>
        <div class="pill" id="statTime">Time: 90s</div>
        <div class="pill" id="statRound">Round: 1</div>
        <div class="pill" id="statStreak">Streak: 0</div>
      </section>

      <section class="briefing" aria-label="Mission briefing">
        <div class="briefing-card">
          <div class="briefing-title">Mission briefing</div>
          <p>
            You are the stability director. Each signal node needs the right directive to keep the grid intact.
            AI suggestions are hints, not orders—override them when they look wrong.
          </p>
          <div class="briefing-tags">
            <span class="tag">Target score: 2500</span>
            <span class="tag">Integrity: 5</span>
            <span class="tag">Time: 90s</span>
          </div>
        </div>
      </section>

      <main class="stage">
        <canvas id="game" role="img" aria-label="oneAI strategy grid"></canvas>
        <div class="overlay" id="overlay" role="dialog" aria-live="polite">
          <div class="overlay-card">
            <p class="overlay-kicker" id="overlayKicker">Directive Grid</p>
            <h2 id="overlayTitle">Plan your first move</h2>
            <p id="overlayCopy">
              Select a node with your mouse. Assign a directive with 1, 2, or 3. Press Space to execute early.
            </p>
            <div class="overlay-score" id="overlayScore">
              <h3>Scoring system (before you start)</h3>
              <ul>
                <li><strong>Correct directive</strong>: +120 + time bonus.</li>
                <li><strong>Wrong directive</strong>: -50 and integrity loss.</li>
                <li><strong>Missed signal</strong>: integrity loss.</li>
                <li><strong>Streak bonus</strong>: +25 per correct chain.</li>
              </ul>
            </div>
            <p class="overlay-hint" id="overlayHint">Goal: Reach the target score before time runs out.</p>
            <div class="overlay-actions">
              <button id="btnOverlayStart" class="primary">Begin Round</button>
              <button id="btnOverlayRestart">Restart</button>
            </div>
          </div>
        </div>
      </main>

      <section class="legend">
        <div class="legend-block">
          <h3>Directives</h3>
          <ul>
            <li><strong>1 — Filter</strong>: best for low-noise signals.</li>
            <li><strong>2 — Analyze</strong>: best for adaptive signals.</li>
            <li><strong>3 — Quarantine</strong>: best for unstable signals.</li>
          </ul>
        </div>
        <div class="legend-block">
          <h3>Controls</h3>
          <ul>
            <li>Mouse: select a node.</li>
            <li>Keys 1-3: assign directive.</li>
            <li>Space: execute early.</li>
            <li>Esc: pause/resume.</li>
            <li>R: restart.</li>
          </ul>
        </div>
        <div class="legend-block">
          <h3>Scoring</h3>
          <ul>
            <li>Correct directive: +120 + time bonus.</li>
            <li>Wrong directive: -50 and integrity loss.</li>
            <li>Streaks add +25 bonus per correct chain.</li>
          </ul>
        </div>
      </section>

      <section class="faq" aria-label="FAQ">
        <h3>FAQ</h3>
        <div class="faq-item">
          <div class="faq-q">Do we have to match the AI decisions?</div>
          <div class="faq-a">
            No. The AI is a suggestion engine, not the scorekeeper. You score by matching the signal type
            (Filter, Analyze, Quarantine). If the AI is wrong, override it to protect integrity.
          </div>
        </div>
      </section>

      <section class="knowledge" aria-live="polite">
        <div class="knowledge-card">
          <div class="card-header">
            <h3>Knowledge Base</h3>
            <span id="knowledgeStatus" class="tag">Knowledge seeded</span>
          </div>
          <p class="card-subtitle">Live insights extracted from grid telemetry.</p>
          <ul id="knowledgeLog" class="knowledge-log"></ul>
        </div>
        <div class="knowledge-card">
          <div class="card-header">
            <h3>System Structure</h3>
            <span class="tag">Loop</span>
          </div>
          <ol id="structureSteps" class="structure-steps">
            <li data-step="briefing">Briefing → observe signal layout.</li>
            <li data-step="decide">Decision → assign directives.</li>
            <li data-step="resolve">Resolve → audit outcomes.</li>
            <li data-step="iterate">Iterate → compress the cycle.</li>
          </ol>
        </div>
        <div class="knowledge-card">
          <div class="card-header">
            <h3>Directive Matrix</h3>
            <span class="tag">Protocol</span>
          </div>
          <div class="matrix">
            <div class="matrix-row"><span>Filter</span><span>Low-noise signals, clean data lanes.</span></div>
            <div class="matrix-row"><span>Analyze</span><span>Adaptive signals, pattern-shifting.</span></div>
            <div class="matrix-row"><span>Quarantine</span><span>Unstable signals, integrity risk.</span></div>
          </div>
        </div>
      </section>
    </div>

    <script src="game.js"></script>
  </body>
</html>
